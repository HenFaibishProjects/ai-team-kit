<div class="ai-command-center">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <mat-icon class="header-icon">psychology</mat-icon>
      <div class="header-text">
        <h1>AI Command Center</h1>
        <p>Professional AI prompts to supercharge your team's productivity across all domains</p>
      </div>
    </div>
  </div>

  <!-- Search and Filters Bar -->
  <mat-card class="filters-card">
    <mat-card-content>
      <div class="filters-container">
        <!-- Search -->
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search prompts</mat-label>
          <input 
            matInput 
            [(ngModel)]="searchTerm" 
            (ngModelChange)="onSearchChange()"
            placeholder="Search by title, description, or tags...">
          <mat-icon matPrefix>search</mat-icon>
          <button mat-icon-button matSuffix *ngIf="searchTerm" (click)="searchTerm=''; onSearchChange()">
            <mat-icon>clear</mat-icon>
          </button>
        </mat-form-field>

        <!-- Difficulty Filter -->
        <mat-form-field appearance="outline" class="difficulty-field">
          <mat-label>Difficulty Level</mat-label>
          <mat-select [(ngModel)]="selectedDifficulty" (selectionChange)="onDifficultyChange()">
            <mat-option value="all">All Levels</mat-option>
            <mat-option value="beginner">Beginner</mat-option>
            <mat-option value="intermediate">Intermediate</mat-option>
            <mat-option value="advanced">Advanced</mat-option>
          </mat-select>
          <mat-icon matPrefix>school</mat-icon>
        </mat-form-field>

        <!-- Context Selector -->
        <mat-form-field appearance="outline" class="context-field">
          <mat-label>Context</mat-label>
          <mat-select [(ngModel)]="selectedContext">
            <mat-option *ngFor="let context of contextOptions" [value]="context.id">
              <mat-icon>{{context.icon}}</mat-icon>
              {{context.name}}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>settings</mat-icon>
        </mat-form-field>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Category Filter Chips -->
  <div class="category-section">
    <h3 class="section-title">
      <mat-icon>category</mat-icon>
      Browse by Category
    </h3>
    <div class="category-chips">
      <mat-chip-listbox [(ngModel)]="selectedCategory" (ngModelChange)="filterTemplates()">
        <mat-chip-option 
          *ngFor="let category of categories" 
          [value]="category.id"
          [class.selected]="selectedCategory === category.id">
          <mat-icon>{{category.icon}}</mat-icon>
          {{category.name}}
          <span class="chip-count">({{category.count}})</span>
        </mat-chip-option>
      </mat-chip-listbox>
    </div>
  </div>

  <!-- Results Count -->
  <div class="results-info" *ngIf="filteredTemplates.length > 0">
    <mat-icon>info</mat-icon>
    <span>Showing {{filteredTemplates.length}} prompt template{{filteredTemplates.length !== 1 ? 's' : ''}}</span>
  </div>

  <!-- No Results Message -->
  <mat-card *ngIf="filteredTemplates.length === 0" class="no-results">
    <mat-card-content>
      <mat-icon>search_off</mat-icon>
      <h3>No prompts found</h3>
      <p>Try adjusting your search or filters</p>
      <button mat-raised-button color="primary" (click)="searchTerm=''; selectedCategory='all'; selectedDifficulty='all'; filterTemplates()">
        Clear All Filters
      </button>
    </mat-card-content>
  </mat-card>

  <!-- Prompt Templates Grid -->
  <div class="templates-grid" *ngIf="filteredTemplates.length > 0">
    <mat-card *ngFor="let template of filteredTemplates" class="template-card">
      <mat-card-header>
        <div class="template-header-content">
          <mat-icon class="template-icon" [class]="'icon-' + template.category">{{template.icon}}</mat-icon>
          <div class="template-title-section">
            <mat-card-title>{{template.title}}</mat-card-title>
            <div class="template-meta">
              <mat-chip class="difficulty-chip" [class]="'difficulty-' + template.difficulty">
                {{template.difficulty || 'intermediate'}}
              </mat-chip>
              <mat-chip class="category-chip">
                {{getCategoryName(template.category)}}
              </mat-chip>
            </div>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content>
        <p class="template-description">{{template.description}}</p>
        
        <!-- Tags -->
        <div class="template-tags" *ngIf="template.tags && template.tags.length > 0">
          <mat-chip-listbox>
            <mat-chip *ngFor="let tag of template.tags" class="tag-chip">
              <mat-icon>label</mat-icon>
              {{tag}}
            </mat-chip>
          </mat-chip-listbox>
        </div>

        <!-- Variables Required -->
        <div class="template-variables" *ngIf="template.variables.length > 0">
          <div class="variables-header">
            <mat-icon>input</mat-icon>
            <span>Required inputs:</span>
          </div>
          <div class="variables-list">
            <mat-chip *ngFor="let variable of template.variables" class="variable-chip">
              {{variable}}
            </mat-chip>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="useTemplate(template)">
          <mat-icon>edit</mat-icon>
          Use This Template
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Custom Prompt FAB -->
  <button 
    mat-fab 
    extended 
    color="accent" 
    (click)="toggleCustomForm()"
    class="custom-fab"
    [class.fab-active]="showCustomForm">
    <mat-icon>{{showCustomForm ? 'close' : 'add'}}</mat-icon>
    {{showCustomForm ? 'Close Builder' : 'Custom Prompt Builder'}}
  </button>

  <!-- Prompt Builder Form -->
  <mat-card *ngIf="showCustomForm" class="prompt-builder" id="custom-form">
    <mat-card-header>
      <div class="builder-header">
        <div class="builder-title">
          <mat-icon>construction</mat-icon>
          <mat-card-title>AI Prompt Builder</mat-card-title>
        </div>
        <p class="builder-subtitle">Fill in the details below to generate a customized AI prompt</p>
      </div>
    </mat-card-header>
    <mat-card-content>
      <!-- Form Sections -->
      <div class="form-sections">
        <!-- Project Information Section -->
        <div class="form-section">
          <h4 class="section-header">
            <mat-icon>folder</mat-icon>
            Project Information
          </h4>
          <div class="form-grid">
            <mat-form-field appearance="outline">
              <mat-label>Project Name</mat-label>
              <input matInput [(ngModel)]="projectName" placeholder="e.g., E-commerce Platform">
              <mat-icon matPrefix>folder</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Technology Stack</mat-label>
              <input matInput [(ngModel)]="technology" placeholder="e.g., Angular, NestJS, PostgreSQL">
              <mat-icon matPrefix>code</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Team Size</mat-label>
              <input matInput [(ngModel)]="teamSize" placeholder="e.g., 5 developers, 2 QA">
              <mat-icon matPrefix>groups</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Timeframe</mat-label>
              <input matInput [(ngModel)]="timeframe" placeholder="e.g., 2-week sprint, Q1 2024">
              <mat-icon matPrefix>schedule</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <!-- Additional Context Section -->
        <div class="form-section">
          <h4 class="section-header">
            <mat-icon>info</mat-icon>
            Additional Context
          </h4>
          <div class="form-grid">
            <mat-form-field appearance="outline">
              <mat-label>Budget</mat-label>
              <input matInput [(ngModel)]="budget" placeholder="e.g., $50K, Limited resources">
              <mat-icon matPrefix>attach_money</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Deadline</mat-label>
              <input matInput [(ngModel)]="deadline" placeholder="e.g., End of Q2, March 15">
              <mat-icon matPrefix>event</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Key Stakeholders</mat-label>
              <input matInput [(ngModel)]="stakeholders" placeholder="e.g., Product Manager, CTO, Marketing Team">
              <mat-icon matPrefix>people</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Constraints</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="constraints" 
                rows="2"
                placeholder="e.g., Must use existing infrastructure, Limited to open-source tools"></textarea>
              <mat-icon matPrefix>block</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <!-- Problem & Goal Section -->
        <div class="form-section">
          <h4 class="section-header">
            <mat-icon>flag</mat-icon>
            Problem & Goal
          </h4>
          <div class="form-grid">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Current Issue / Problem</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="currentIssue" 
                rows="3"
                placeholder="Describe the current problem or challenge you're facing..."></textarea>
              <mat-icon matPrefix>error</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Desired Outcome</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="desiredOutcome" 
                rows="3"
                placeholder="What would success look like? What do you want to achieve?"></textarea>
              <mat-icon matPrefix>check_circle</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Specific Goal / Question</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="specificGoal" 
                rows="3"
                placeholder="Be as specific as possible about what you need help with..."></textarea>
              <mat-icon matPrefix>flag</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <!-- Custom Query Section -->
        <div class="form-section">
          <h4 class="section-header">
            <mat-icon>edit_note</mat-icon>
            Custom Query (Optional)
          </h4>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Write Your Own Prompt</mat-label>
            <textarea 
              matInput 
              [(ngModel)]="customQuery" 
              rows="5"
              placeholder="If you prefer to write your own prompt from scratch, enter it here. The context and project details above will be appended automatically."></textarea>
            <mat-icon matPrefix>edit_note</mat-icon>
            <mat-hint>Leave empty to use a template-based prompt</mat-hint>
          </mat-form-field>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button 
          mat-raised-button 
          color="primary" 
          (click)="generatePrompt()" 
          *ngIf="!customQuery"
          [disabled]="!generatedPrompt">
          <mat-icon>auto_awesome</mat-icon>
          Generate from Template
        </button>
        <button 
          mat-raised-button 
          color="primary" 
          (click)="createCustomPrompt()" 
          *ngIf="customQuery">
          <mat-icon>create</mat-icon>
          Create Custom Prompt
        </button>
        <button mat-raised-button (click)="clearForm()">
          <mat-icon>clear</mat-icon>
          Clear All Fields
        </button>
      </div>

      <!-- Generated Prompt Display -->
      <div *ngIf="generatedPrompt" class="generated-prompt">
        <div class="prompt-header">
          <h3>
            <mat-icon>lightbulb</mat-icon>
            Your Generated AI Prompt
          </h3>
          <div class="prompt-actions">
            <button mat-raised-button color="accent" (click)="copyPrompt()">
              <mat-icon>content_copy</mat-icon>
              Copy to Clipboard
            </button>
          </div>
        </div>
        <div class="prompt-content">
          <pre>{{generatedPrompt}}</pre>
        </div>
        <div class="prompt-tips">
          <mat-icon>info</mat-icon>
          <div class="tips-text">
            <strong>Next Steps:</strong>
            <ol>
              <li>Click "Copy to Clipboard" above</li>
              <li>Open your preferred AI assistant (ChatGPT, Claude, Gemini, etc.)</li>
              <li>Paste the prompt and get intelligent, context-aware responses</li>
              <li>Iterate and refine based on the AI's output</li>
            </ol>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Quick Tips Section -->
  <mat-card class="tips-card">
    <mat-card-header>
      <mat-icon>tips_and_updates</mat-icon>
      <mat-card-title>Pro Tips for Better AI Prompts</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="tips-grid">
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Be Specific</h4>
            <p>The more details you provide, the more accurate and relevant the AI's response will be</p>
          </div>
        </div>
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Use Context</h4>
            <p>Select the appropriate context (Sprint, Feature, Architecture, etc.) to frame your question</p>
          </div>
        </div>
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Iterate</h4>
            <p>Don't settle for the first response - ask follow-up questions to refine the output</p>
          </div>
        </div>
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Combine Templates</h4>
            <p>Use multiple templates in sequence for complex, multi-faceted problems</p>
          </div>
        </div>
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Save Successful Prompts</h4>
            <p>Keep a library of prompts that worked well for your team to reuse and share</p>
          </div>
        </div>
        <div class="tip-item">
          <mat-icon>check_circle</mat-icon>
          <div class="tip-content">
            <h4>Validate AI Output</h4>
            <p>Always review and validate AI-generated content before implementing it</p>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Use Cases Section -->
  <mat-card class="use-cases-card">
    <mat-card-header>
      <mat-icon>lightbulb</mat-icon>
      <mat-card-title>Popular Use Cases</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="use-cases-grid">
        <div class="use-case" (click)="selectedCategory='planning'; filterTemplates()">
          <mat-icon>event_note</mat-icon>
          <h4>Sprint Planning</h4>
          <p>Break down features, estimate effort, identify risks</p>
        </div>
        <div class="use-case" (click)="selectedCategory='development'; filterTemplates()">
          <mat-icon>code</mat-icon>
          <h4>Code Architecture</h4>
          <p>Design systems, review code, refactor legacy code</p>
        </div>
        <div class="use-case" (click)="selectedCategory='testing'; filterTemplates()">
          <mat-icon>bug_report</mat-icon>
          <h4>Testing Strategy</h4>
          <p>Create test plans, automate testing, manage bugs</p>
        </div>
        <div class="use-case" (click)="selectedCategory='security'; filterTemplates()">
          <mat-icon>security</mat-icon>
          <h4>Security Audit</h4>
          <p>Assess vulnerabilities, ensure compliance, protect data</p>
        </div>
        <div class="use-case" (click)="selectedCategory='devops'; filterTemplates()">
          <mat-icon>cloud</mat-icon>
          <h4>DevOps & CI/CD</h4>
          <p>Build pipelines, deploy to cloud, monitor systems</p>
        </div>
        <div class="use-case" (click)="selectedCategory='documentation'; filterTemplates()">
          <mat-icon>description</mat-icon>
          <h4>Documentation</h4>
          <p>Write READMEs, API docs, onboarding guides</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
